package com.technical.task.data

import com.technical.task.data.races.RaceRepositoryImp
import com.technical.task.domain.races.repository.RaceRepository
import okhttp3.mockwebserver.MockResponse
import okhttp3.mockwebserver.MockWebServer
import org.junit.After
import org.junit.Test

import org.junit.Assert.*
import org.junit.Before
import org.junit.runner.RunWith
import org.mockito.junit.MockitoJUnitRunner
import java.net.HttpURLConnection

/**
 * Example local unit test, which will execute on the development machine (host).
 *
 * See [testing documentation](http://d.android.com/tools/testing).
 */
@RunWith(MockitoJUnitRunner::class)
class RaceRepositoryTest {
    private var mockWebServer = MockWebServer()
    lateinit var raceRepository: RaceRepository

    @Before
    fun setUp() {
        raceRepository = RaceRepositoryImp(mockWebServer.url("/").toString())
    }

    @Test
    fun should_return_list_when_getNextToGo() {
        val response = MockResponse()
            .addHeader("Content-Type", "application/json; charset=utf-8")
            .setResponseCode(HttpURLConnection.HTTP_OK)
            .setBody(raceTestPayload())

        mockWebServer.enqueue(response)

        val data = raceRepository.getNextToGo(5)
        assertEquals("Richmond", data[2].meetingName)
        assertEquals(11, data[2].raceNumber)
        assertEquals("9daef0d7-bf3c-4f50-921d-8e818c60fe61", data[2].category)
        assertEquals(1689582960, data[2].advertisedStartTime)
    }

    private fun raceTestPayload(): String {
        return "{\"data\": {\"next_to_go_ids\": [\"f03cacf9-df1c-4582-a6e6-295056e016cc\", \"e2ed0616-5495-4ce2-831d-a68ed5846dc5\", \"b1008715-fc7a-4f75-bd58-211318e11a94\", \"0133d055-1f8a-4dd9-ae31-9c19b49d362e\", \"3422e929-e12c-4803-9db1-56643e610543\", \"c63568fc-00fb-49c8-8861-289b8532c1dd\", \"c6fd5fa1-fb99-4a2c-8c2d-6f6c36247645\", \"80aea8c2-43b8-427a-a10e-e0b4b2130b0b\", \"b44016d2-5d58-4291-9a93-883bba53edf1\", \"b6ddbad1-4983-444e-9826-c1a355eaeeec\"], \"race_summaries\": {\"0133d055-1f8a-4dd9-ae31-9c19b49d362e\": {\"advertised_start\": {\"seconds\": 1689582600}, \"category_id\": \"9daef0d7-bf3c-4f50-921d-8e818c60fe61\", \"meeting_id\": \"21a5b1cd-f625-4ea2-9ac9-326bf455326a\", \"meeting_name\": \"Traralgon\", \"race_form\": {\"additional_data\": \"{\\\"revealed_race_info\\\":{\\\"track_name\\\":\\\"Traralgon\\\",\\\"state\\\":\\\"VIC\\\",\\\"country\\\":\\\"AUS\\\",\\\"number\\\":11,\\\"race_name\\\":\\\"Aussie Secret @ Stud\\\",\\\"time\\\":\\\"2023-07-17T08:30:00Z\\\"}}\", \"distance\": 395, \"distance_type\": {\"id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"name\": \"Metres\", \"short_name\": \"m\"}, \"distance_type_id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"generated\": 1, \"race_comment\": \"LAKEVIEW RAYMOND (8) was out of the placings last time when seventh at this track (23.35) but did record second best time of the card when winning three back. His PB at this course and distance is a strong 22.48. Better than the latest run and deserves another chance. JOHNNY (4) was big odds last time but gave a huge sight after a fast early split, weakening late to finish a 1.5 lengths fourth (26.55) over 460m at Warragul. Form from his last run is proving to be solid. Must be included in calculations.  NEXT TEARDROP (2) should be thereabouts.\", \"race_comment_alternative\": \"LAKEVIEW RAYMOND (8) was out of the placings last time when seventh at this track (23.35) but did record second best time of the card when winning three back. His PB at this course and distance is a strong 22.48. Better than the latest run and deserves another chance. JOHNNY (4) was big odds last time but gave a huge sight after a fast early split, weakening late to finish a 1.5 lengths fourth (26.55) over 460m at Warragul. Form from his last run is proving to be solid. Must be included in calculations.  NEXT TEARDROP (2) should be thereabouts.\", \"silk_base_url\": \"drr38safykj6s.cloudfront.net\", \"track_condition\": {\"id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"name\": \"Good\", \"short_name\": \"good\"}, \"track_condition_id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"weather\": {\"icon_uri\": \"FINE\", \"id\": \"08e5f78c-1a36-11eb-9269-cef03e67f1a3\", \"name\": \"FINE\", \"short_name\": \"fine\"}, \"weather_id\": \"08e5f78c-1a36-11eb-9269-cef03e67f1a3\"}, \"race_id\": \"0133d055-1f8a-4dd9-ae31-9c19b49d362e\", \"race_name\": \"Aussie Secret @ Stud\", \"race_number\": 11, \"venue_country\": \"AUS\", \"venue_id\": \"deece3ec-e060-4add-a7de-367863a26a0d\", \"venue_name\": \"Traralgon\", \"venue_state\": \"VIC\"}, \"3422e929-e12c-4803-9db1-56643e610543\": {\"advertised_start\": {\"seconds\": 1689582600}, \"category_id\": \"4a2788f8-e825-4d36-9894-efd4baf1cfae\", \"meeting_id\": \"74179438-84c8-42a8-b6b5-333e52a1a343\", \"meeting_name\": \"Morioka\", \"race_form\": {\"additional_data\": \"{\\\"revealed_race_info\\\":{\\\"track_name\\\":\\\"Morioka\\\",\\\"state\\\":\\\"JPN\\\",\\\"country\\\":\\\"JPN\\\",\\\"number\\\":11,\\\"race_name\\\":\\\"\\\",\\\"time\\\":\\\"1970-01-01T00:00:00Z\\\"}}\", \"distance\": 1600, \"distance_type\": {\"id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"name\": \"Metres\", \"short_name\": \"m\"}, \"distance_type_id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"generated\": 1, \"race_comment\": \"HAKUSHIN PERSONAL (5) is going very well this time in with four wins from 10 attempts. Won two starts back at Mizusawa and was close again last time out. Goes well at this journey. Key runner. MEINER ASTORIA (11) resumed with a win at Mizusawa then missed the placings last time. Has a strong record at the third run in so he is among the winning hopes. BRAINY RUN (8) turned in a modest performance last time at Mizusawa. That followed a win at Mizusawa at the previous outing. This doesn't look as hard so he can make amends. DOLLARS PRICELESS (6) did a great job to score over this course and distance last start to maintain his good form of late. Suitably placed so anticipating another big run.\", \"race_comment_alternative\": \"HAKUSHIN PERSONAL (5) is going very well this time in with four wins from 10 attempts. Won two starts back at Mizusawa and was close again last time out. Goes well at this journey. Key runner. MEINER ASTORIA (11) resumed with a win at Mizusawa then missed the placings last time. Has a strong record at the third run in so he is among the winning hopes. BRAINY RUN (8) turned in a modest performance last time at Mizusawa. That followed a win at Mizusawa at the previous outing. This doesn't look as hard so he can make amends. DOLLARS PRICELESS (6) did a great job to score over this course and distance last start to maintain his good form of late. Suitably placed so anticipating another big run.\", \"silk_base_url\": \"drr38safykj6s.cloudfront.net\", \"track_condition\": {\"id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"name\": \"Good\", \"short_name\": \"good\"}, \"track_condition_id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\"}, \"race_id\": \"3422e929-e12c-4803-9db1-56643e610543\", \"race_name\": \"Race 11 - 1600\", \"race_number\": 11, \"venue_country\": \"JPN\", \"venue_id\": \"29de2693-5113-4f40-a9b8-0bfd794798ac\", \"venue_name\": \"Morioka\", \"venue_state\": \"JPN\"}, \"80aea8c2-43b8-427a-a10e-e0b4b2130b0b\": {\"advertised_start\": {\"seconds\": 1689582960}, \"category_id\": \"9daef0d7-bf3c-4f50-921d-8e818c60fe61\", \"meeting_id\": \"5087b054-22d4-4646-92be-f8df791e5f0e\", \"meeting_name\": \"Richmond\", \"race_form\": {\"additional_data\": \"{\\\"revealed_race_info\\\":{\\\"track_name\\\":\\\"Richmond\\\",\\\"state\\\":\\\"NSW\\\",\\\"country\\\":\\\"AUS\\\",\\\"number\\\":11,\\\"race_name\\\":\\\"\\\",\\\"time\\\":\\\"1970-01-01T00:00:00Z\\\"}}\", \"distance\": 320, \"distance_type\": {\"id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"name\": \"Metres\", \"short_name\": \"m\"}, \"distance_type_id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"generated\": 1, \"race_comment\": \"JIGSAW JOE (4) was crowded for room and fell at Goulburn last time after finishing sixth in a NG two back. Has the ability and can bounce back. MIGHTY RHYTHM (1) hit the ground running from out wide and on speed early but faded and swamped late when 5th at this track in Grade 4/5 company. Has a good record here at this journey. Has run slick time here, with a 18.26 PB at this distance. Should be in this for a long way. BLOW YOUR HORN (3) goes very well this course and distance starting 12 times for five wins and six minors. Was out of the placings last time (24.03) at this track in a Grade 3/4, finishing seventh and beaten 16 lengths. Looks well placed here and among the chances. SEE HOW (7) was out of placings last time (19.42) at this track in a Grade 4/5, finishing seventh and beaten 15 lengths. Has already won out of this draw.\", \"race_comment_alternative\": \"JIGSAW JOE (4) was crowded for room and fell at Goulburn last time after finishing sixth in a NG two back. Has the ability and can bounce back. MIGHTY RHYTHM (1) hit the ground running from out wide and on speed early but faded and swamped late when 5th at this track in Grade 4/5 company. Has a good record here at this journey. Has run slick time here, with a 18.26 PB at this distance. Should be in this for a long way. BLOW YOUR HORN (3) goes very well this course and distance starting 12 times for five wins and six minors. Was out of the placings last time (24.03) at this track in a Grade 3/4, finishing seventh and beaten 16 lengths. Looks well placed here and among the chances. SEE HOW (7) was out of placings last time (19.42) at this track in a Grade 4/5, finishing seventh and beaten 15 lengths. Has already won out of this draw.\", \"silk_base_url\": \"drr38safykj6s.cloudfront.net\", \"track_condition\": {\"id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"name\": \"Good\", \"short_name\": \"good\"}, \"track_condition_id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"weather\": {\"icon_uri\": \"FINE\", \"id\": \"08e5f78c-1a36-11eb-9269-cef03e67f1a3\", \"name\": \"FINE\", \"short_name\": \"fine\"}, \"weather_id\": \"08e5f78c-1a36-11eb-9269-cef03e67f1a3\"}, \"race_id\": \"80aea8c2-43b8-427a-a10e-e0b4b2130b0b\", \"race_name\": \"Ladbrokes Mates Mode\", \"race_number\": 11, \"venue_country\": \"AUS\", \"venue_id\": \"d9bf49ec-2497-4ef7-ace2-486f60bae4b2\", \"venue_name\": \"Richmond\", \"venue_state\": \"NSW\"}, \"b1008715-fc7a-4f75-bd58-211318e11a94\": {\"advertised_start\": {\"seconds\": 1689582420}, \"category_id\": \"9daef0d7-bf3c-4f50-921d-8e818c60fe61\", \"meeting_id\": \"32d1a49e-4525-46a2-b572-0ad7d1456746\", \"meeting_name\": \"Northam\", \"race_form\": {\"additional_data\": \"{\\\"revealed_race_info\\\":{\\\"track_name\\\":\\\"Northam\\\",\\\"state\\\":\\\"WA\\\",\\\"country\\\":\\\"AUS\\\",\\\"number\\\":10,\\\"race_name\\\":\\\"Bet Local Bet Tabtouch\\\",\\\"time\\\":\\\"2023-07-17T08:27:00Z\\\"}}\", \"distance\": 297, \"distance_type\": {\"id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"name\": \"Metres\", \"short_name\": \"m\"}, \"distance_type_id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"generated\": 1, \"race_comment\": \"AFTER SHOW (2) is a talented type with an excellent strike rate at this journey. Jumped well when winning her last couple. Scored latest at this track in a handy 17.11. Recorded the quickest time on the card last start. Hard to go past. HENRY KEEPING (1) boasts a strong record this journey here with 14 wins and three minors from 22 tries. Was out of the placings last time (17.51) at this track in a Free For All, finishing fourth and beaten 6 lengths. Looks suited here and can measure up. HUMMINGBIRD HANA (8) is among the chances again if she runs up to the latest effort.\", \"race_comment_alternative\": \"AFTER SHOW (2) is a talented type with an excellent strike rate at this journey. Jumped well when winning her last couple. Scored latest at this track in a handy 17.11. Recorded the quickest time on the card last start. Hard to go past. HENRY KEEPING (1) boasts a strong record this journey here with 14 wins and three minors from 22 tries. Was out of the placings last time (17.51) at this track in a Free For All, finishing fourth and beaten 6 lengths. Looks suited here and can measure up. HUMMINGBIRD HANA (8) is among the chances again if she runs up to the latest effort.\", \"silk_base_url\": \"drr38safykj6s.cloudfront.net\", \"track_condition\": {\"id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"name\": \"Good\", \"short_name\": \"good\"}, \"track_condition_id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"weather\": {\"icon_uri\": \"FINE\", \"id\": \"08e5f78c-1a36-11eb-9269-cef03e67f1a3\", \"name\": \"FINE\", \"short_name\": \"fine\"}, \"weather_id\": \"08e5f78c-1a36-11eb-9269-cef03e67f1a3\"}, \"race_id\": \"b1008715-fc7a-4f75-bd58-211318e11a94\", \"race_name\": \"Bet Local Bet Tabtouch\", \"race_number\": 10, \"venue_country\": \"AUS\", \"venue_id\": \"648e859c-9c11-4660-81f7-26fe1c148150\", \"venue_name\": \"Northam\", \"venue_state\": \"WA\"}, \"b44016d2-5d58-4291-9a93-883bba53edf1\": {\"advertised_start\": {\"seconds\": 1689583140}, \"category_id\": \"9daef0d7-bf3c-4f50-921d-8e818c60fe61\", \"meeting_id\": \"9016b223-24b8-4249-90c6-e0ed3f5559de\", \"meeting_name\": \"Albion Park\", \"race_form\": {\"additional_data\": \"{\\\"revealed_race_info\\\":{\\\"track_name\\\":\\\"\\\",\\\"state\\\":\\\"\\\",\\\"country\\\":\\\"\\\",\\\"number\\\":0,\\\"race_name\\\":\\\"\\\",\\\"time\\\":\\\"1970-01-01T00:00:00Z\\\"}}\", \"distance\": 520, \"distance_type\": {\"id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"name\": \"Metres\", \"short_name\": \"m\"}, \"distance_type_id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"generated\": 1, \"race_comment\": \"CANYA HAMMER (1) returned a better run last time, finishing in the money (30.69) at this track behind Golden Eye in a Maiden. Turned chasing the leaders but kept coming. Sure to be about the mark. PHOEBE'S HONEY (4) is still a maiden after 17 runs but rarely out of the placings, the latest filling a minor again when fifth at this track. The form from her last run stacks up well. Bold showing expected. OAK'S BEST (2) is in the mix despite finishing out of the placings here last start.\", \"race_comment_alternative\": \"CANYA HAMMER (1) returned a better run last time, finishing in the money (30.69) at this track behind Golden Eye in a Maiden. Turned chasing the leaders but kept coming. Sure to be about the mark. PHOEBE'S HONEY (4) is still a maiden after 17 runs but rarely out of the placings, the latest filling a minor again when fifth at this track. The form from her last run stacks up well. Bold showing expected. OAK'S BEST (2) is in the mix despite finishing out of the placings here last start.\", \"silk_base_url\": \"drr38safykj6s.cloudfront.net\", \"track_condition\": {\"id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"name\": \"Good\", \"short_name\": \"good\"}, \"track_condition_id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"weather\": {\"icon_uri\": \"OCAST\", \"id\": \"5ba75165-3cec-11eb-88bb-36fbfdf5d97f\", \"name\": \"OCAST\", \"short_name\": \"ocast\"}, \"weather_id\": \"5ba75165-3cec-11eb-88bb-36fbfdf5d97f\"}, \"race_id\": \"b44016d2-5d58-4291-9a93-883bba53edf1\", \"race_name\": \"Borgbet Tipping Service Maiden H\", \"race_number\": 1, \"venue_country\": \"AUS\", \"venue_id\": \"12c496d8-9397-4ba4-ba3c-d34ca3625858\", \"venue_name\": \"Albion Park\", \"venue_state\": \"QLD\"}, \"b6ddbad1-4983-444e-9826-c1a355eaeeec\": {\"advertised_start\": {\"seconds\": 1689583320}, \"category_id\": \"9daef0d7-bf3c-4f50-921d-8e818c60fe61\", \"meeting_id\": \"1cb2276c-eaee-4337-a7a9-c42734b3083f\", \"meeting_name\": \"Maitland\", \"race_form\": {\"additional_data\": \"{\\\"revealed_race_info\\\":{\\\"track_name\\\":\\\"Maitland\\\",\\\"state\\\":\\\"NSW\\\",\\\"country\\\":\\\"AUS\\\",\\\"number\\\":2,\\\"race_name\\\":\\\"\\\",\\\"time\\\":\\\"1970-01-01T00:00:00Z\\\"}}\", \"distance\": 450, \"distance_type\": {\"id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"name\": \"Metres\", \"short_name\": \"m\"}, \"distance_type_id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"generated\": 1, \"race_comment\": \"WHISKEY COBBLER (8) boasts a strong record this journey here with four wins and five minors from 11 tries. Below best last time at Wentworth Park (30.38) in a Grade 4, finishing a 8 length fifth. Has the ability and should feature. KINLOCH CUTIE (1) finds it hard to win but looks close to breaking through. Has been in the money the last three starts, the latest when third (25.23) at Muswellbrook. Has a good record here including five wins. The form from her last run is stacking up nicely. Expected to be in the finish again. MY SHEPHERD (3) goes very well this course and distance starting nine times for four wins and two minors. Comes off a (25.28) win last time, scoring by 2 lengths in a Grade 5 over 450m at this track. Looks one of the chances. HOOKED ON RUM (7) is new to this circuit but should be in the mix.\", \"race_comment_alternative\": \"WHISKEY COBBLER (8) boasts a strong record this journey here with four wins and five minors from 11 tries. Below best last time at Wentworth Park (30.38) in a Grade 4, finishing a 8 length fifth. Has the ability and should feature. KINLOCH CUTIE (1) finds it hard to win but looks close to breaking through. Has been in the money the last three starts, the latest when third (25.23) at Muswellbrook. Has a good record here including five wins. The form from her last run is stacking up nicely. Expected to be in the finish again. MY SHEPHERD (3) goes very well this course and distance starting nine times for four wins and two minors. Comes off a (25.28) win last time, scoring by 2 lengths in a Grade 5 over 450m at this track. Looks one of the chances. HOOKED ON RUM (7) is new to this circuit but should be in the mix.\", \"silk_base_url\": \"drr38safykj6s.cloudfront.net\", \"track_condition\": {\"id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"name\": \"Good\", \"short_name\": \"good\"}, \"track_condition_id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"weather\": {\"icon_uri\": \"OCAST\", \"id\": \"5ba75165-3cec-11eb-88bb-36fbfdf5d97f\", \"name\": \"OCAST\", \"short_name\": \"ocast\"}, \"weather_id\": \"5ba75165-3cec-11eb-88bb-36fbfdf5d97f\"}, \"race_id\": \"b6ddbad1-4983-444e-9826-c1a355eaeeec\", \"race_name\": \"Farrell's Dog Biscuits\", \"race_number\": 2, \"venue_country\": \"AUS\", \"venue_id\": \"e497b065-561a-443b-ab8c-b4b9c16c4f56\", \"venue_name\": \"Maitland\", \"venue_state\": \"NSW\"}, \"c63568fc-00fb-49c8-8861-289b8532c1dd\": {\"advertised_start\": {\"seconds\": 1689582780}, \"category_id\": \"9daef0d7-bf3c-4f50-921d-8e818c60fe61\", \"meeting_id\": \"61dd711b-f0ae-4316-8940-b531634806dd\", \"meeting_name\": \"Nowra\", \"race_form\": {\"additional_data\": \"{\\\"revealed_race_info\\\":{\\\"track_name\\\":\\\"Nowra\\\",\\\"state\\\":\\\"NSW\\\",\\\"country\\\":\\\"AUS\\\",\\\"number\\\":2,\\\"race_name\\\":\\\"\\\",\\\"time\\\":\\\"1970-01-01T00:00:00Z\\\"}}\", \"distance\": 365, \"distance_type\": {\"id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"name\": \"Metres\", \"short_name\": \"m\"}, \"distance_type_id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"generated\": 1, \"race_comment\": \"OH SO CLASSY (1) missed the frame last time but prior to that was an effortless Grade 5 winner (18.35) at Richmond, scoring by 4.5 lengths. Looks suited here and big improvement expected. MARVEL ZOMBIE (6) had been in super honest form hitting the frame three times on end before finishing sixth (23.14) at Bulli last time. Form here sound including two wins. Can figure in the finish. EBBY ROSE (2) broke a string of placings finishing in the money two on end before a last start fourth (21.29) at this track. Great chance to atone. FIRE FAIRY (8) deserves plenty of thought over this distance.\", \"race_comment_alternative\": \"OH SO CLASSY (1) missed the frame last time but prior to that was an effortless Grade 5 winner (18.35) at Richmond, scoring by 4.5 lengths. Looks suited here and big improvement expected. MARVEL ZOMBIE (6) had been in super honest form hitting the frame three times on end before finishing sixth (23.14) at Bulli last time. Form here sound including two wins. Can figure in the finish. EBBY ROSE (2) broke a string of placings finishing in the money two on end before a last start fourth (21.29) at this track. Great chance to atone. FIRE FAIRY (8) deserves plenty of thought over this distance.\", \"silk_base_url\": \"drr38safykj6s.cloudfront.net\", \"track_condition\": {\"id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"name\": \"Good\", \"short_name\": \"good\"}, \"track_condition_id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"weather\": {\"icon_uri\": \"FINE\", \"id\": \"08e5f78c-1a36-11eb-9269-cef03e67f1a3\", \"name\": \"FINE\", \"short_name\": \"fine\"}, \"weather_id\": \"08e5f78c-1a36-11eb-9269-cef03e67f1a3\"}, \"race_id\": \"c63568fc-00fb-49c8-8861-289b8532c1dd\", \"race_name\": \"Ryan's Cleaning Service\", \"race_number\": 2, \"venue_country\": \"AUS\", \"venue_id\": \"5df4cfaa-4df2-413a-aa5a-ffd6f874d293\", \"venue_name\": \"Nowra\", \"venue_state\": \"NSW\"}, \"c6fd5fa1-fb99-4a2c-8c2d-6f6c36247645\": {\"advertised_start\": {\"seconds\": 1689582900}, \"category_id\": \"4a2788f8-e825-4d36-9894-efd4baf1cfae\", \"meeting_id\": \"23f5333f-d6a8-4d54-8422-fd58cd9f58eb\", \"meeting_name\": \"Urawa\", \"race_form\": {\"additional_data\": \"{\\\"revealed_race_info\\\":{\\\"track_name\\\":\\\"Urawa\\\",\\\"state\\\":\\\"JPN\\\",\\\"country\\\":\\\"JPN\\\",\\\"number\\\":11,\\\"race_name\\\":\\\"\\\",\\\"time\\\":\\\"1970-01-01T00:00:00Z\\\"}}\", \"distance\": 1400, \"distance_type\": {\"id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"name\": \"Metres\", \"short_name\": \"m\"}, \"distance_type_id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"generated\": 1, \"race_comment\": \"TEA FIVE (3) closed last campaign with back-to-back placings, the last of which was at Funabashi three-and-a-half months ago. Has the pace and the right draw to find a good early position. Leading contender. DAIRYU BOWLER (10) showed improvement last start but found one better over this track and trip. Nicely placed to take this out. ELIZABETH MINORU (11) turned in a decent effort last start to finish second here. Suitably placed so anticipating another big run. MACHINE GUN (5) showed early speed from an outside draw and held a forward position before fading to finish fifth last start over 1400m at Ohi. Has ability and a bold showing is expected.\", \"race_comment_alternative\": \"TEA FIVE (3) closed last campaign with back-to-back placings, the last of which was at Funabashi three-and-a-half months ago. Has the pace and the right draw to find a good early position. Leading contender. DAIRYU BOWLER (10) showed improvement last start but found one better over this track and trip. Nicely placed to take this out. ELIZABETH MINORU (11) turned in a decent effort last start to finish second here. Suitably placed so anticipating another big run. MACHINE GUN (5) showed early speed from an outside draw and held a forward position before fading to finish fifth last start over 1400m at Ohi. Has ability and a bold showing is expected.\", \"silk_base_url\": \"drr38safykj6s.cloudfront.net\", \"track_condition\": {\"id\": \"045cea71-a641-11e7-ba1d-066a01c9ce6e\", \"name\": \"Firm\", \"short_name\": \"firm\"}, \"track_condition_id\": \"045cea71-a641-11e7-ba1d-066a01c9ce6e\", \"weather\": {\"icon_uri\": \"FINE\", \"id\": \"08e5f78c-1a36-11eb-9269-cef03e67f1a3\", \"name\": \"FINE\", \"short_name\": \"fine\"}, \"weather_id\": \"08e5f78c-1a36-11eb-9269-cef03e67f1a3\"}, \"race_id\": \"c6fd5fa1-fb99-4a2c-8c2d-6f6c36247645\", \"race_name\": \"Race 11 - 1400\", \"race_number\": 11, \"venue_country\": \"JPN\", \"venue_id\": \"26207fdc-6176-4437-b7bc-25fec74c7bc8\", \"venue_name\": \"Urawa\", \"venue_state\": \"JPN\"}, \"e2ed0616-5495-4ce2-831d-a68ed5846dc5\": {\"advertised_start\": {\"seconds\": 1689582300}, \"category_id\": \"4a2788f8-e825-4d36-9894-efd4baf1cfae\", \"meeting_id\": \"5677cc31-b2fd-4ec5-936e-a4c24c3f03f7\", \"meeting_name\": \"Kochi\", \"race_form\": {\"additional_data\": \"{\\\"revealed_race_info\\\":{\\\"track_name\\\":\\\"Kochi\\\",\\\"state\\\":\\\"JPN\\\",\\\"country\\\":\\\"JPN\\\",\\\"number\\\":5,\\\"race_name\\\":\\\"\\\",\\\"time\\\":\\\"1970-01-01T00:00:00Z\\\"}}\", \"distance\": 1300, \"distance_type\": {\"id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"name\": \"Metres\", \"short_name\": \"m\"}, \"distance_type_id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"generated\": 1, \"race_comment\": \"OKEN LIGHT (9) scored dominantly here over 1600m last start. Form here strong boasting two wins from four starts. Bold showing expected. KAWACHAN FAITH (10) was prominent on straightening and was an impressive maiden winner last time out here. Winning rider Yuta Goma stays aboard and he is a solid top-three hope. FOREWIND (6) met with solid support last start when finishing third. Well-placed to make amends. MIO FIRST (12) has a decent record at this circuit with a win and two minor placings from five starts. Serious threat.\", \"race_comment_alternative\": \"OKEN LIGHT (9) scored dominantly here over 1600m last start. Form here strong boasting two wins from four starts. Bold showing expected. KAWACHAN FAITH (10) was prominent on straightening and was an impressive maiden winner last time out here. Winning rider Yuta Goma stays aboard and he is a solid top-three hope. FOREWIND (6) met with solid support last start when finishing third. Well-placed to make amends. MIO FIRST (12) has a decent record at this circuit with a win and two minor placings from five starts. Serious threat.\", \"silk_base_url\": \"drr38safykj6s.cloudfront.net\", \"track_condition\": {\"id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"name\": \"Good\", \"short_name\": \"good\"}, \"track_condition_id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\"}, \"race_id\": \"e2ed0616-5495-4ce2-831d-a68ed5846dc5\", \"race_name\": \"Race 5 - 1300\", \"race_number\": 5, \"venue_country\": \"JPN\", \"venue_id\": \"4d40cec3-1539-4ac4-9027-7a436a18fca3\", \"venue_name\": \"Kochi\", \"venue_state\": \"JPN\"}, \"f03cacf9-df1c-4582-a6e6-295056e016cc\": {\"advertised_start\": {\"seconds\": 1689582120}, \"category_id\": \"161d9be2-e909-4326-8c2c-35ed71fb460b\", \"meeting_id\": \"fb12cf71-c0da-4646-b598-5627d7eab4d9\", \"meeting_name\": \"Redcliffe\", \"race_form\": {\"additional_data\": \"{\\\"revealed_race_info\\\":{\\\"track_name\\\":\\\"Redcliffe\\\",\\\"state\\\":\\\"QLD\\\",\\\"country\\\":\\\"AUS\\\",\\\"number\\\":3,\\\"race_name\\\":\\\"Power Up Lawn Mowers Pace\\\",\\\"time\\\":\\\"2023-07-17T08:22:00Z\\\"}}\", \"distance\": 1780, \"distance_type\": {\"id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"name\": \"Metres\", \"short_name\": \"m\"}, \"distance_type_id\": \"570775ae-09ec-42d5-989d-7c8f06366aa7\", \"generated\": 1, \"race_comment\": \"FRANCO NATHAN (9) ran sixth last start at Marburg over 1850m, beaten 5.5 metres. Will need an ounce of luck to slot in from this tricky draw but is a winning chance if the breaks come his way. MAJOR TRALEE (3) ran sixth last start at Marburg over 1850m, beaten 19 metres. Expect him to pose a serious challenge. RIVERINA FLASH (2) is in the mix following a fourth at his most recent appearance over 2040m at this track and from his good draw he could even take them all the way. DELIGHTFUL RAINBOW (8) is worth some thought after her last-start fifth over 1660m at Albion Park on July 11 and she should find this a touch easier as well.\", \"race_comment_alternative\": \"FRANCO NATHAN (9) ran sixth last start at Marburg over 1850m, beaten 5.5 metres. Will need an ounce of luck to slot in from this tricky draw but is a winning chance if the breaks come his way. MAJOR TRALEE (3) ran sixth last start at Marburg over 1850m, beaten 19 metres. Expect him to pose a serious challenge. RIVERINA FLASH (2) is in the mix following a fourth at his most recent appearance over 2040m at this track and from his good draw he could even take them all the way. DELIGHTFUL RAINBOW (8) is worth some thought after her last-start fifth over 1660m at Albion Park on July 11 and she should find this a touch easier as well.\", \"silk_base_url\": \"drr38safykj6s.cloudfront.net\", \"track_condition\": {\"id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"name\": \"Good\", \"short_name\": \"good\"}, \"track_condition_id\": \"10a14653-a33d-11e7-810d-0a1a4ae29bd2\", \"weather\": {\"icon_uri\": \"OCAST\", \"id\": \"5ba75165-3cec-11eb-88bb-36fbfdf5d97f\", \"name\": \"OCAST\", \"short_name\": \"ocast\"}, \"weather_id\": \"5ba75165-3cec-11eb-88bb-36fbfdf5d97f\"}, \"race_id\": \"f03cacf9-df1c-4582-a6e6-295056e016cc\", \"race_name\": \"Power Up Lawn Mowers Pace\", \"race_number\": 3, \"venue_country\": \"AUS\", \"venue_id\": \"218b33c5-342d-47bc-bbef-05546ca8dacb\", \"venue_name\": \"Redcliffe\", \"venue_state\": \"QLD\"}}}, \"message\": \"Next 10 races from each category\", \"status\": 200}"
    }

    @After
    fun teardown() {
        mockWebServer.shutdown()
    }
}